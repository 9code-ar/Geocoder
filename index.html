<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Geocoder | Geocoder - The almost missing Geocoder PHP library!</title>

    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>
          <a href="/"><img src="/images/geocoder.png" class="logo" /></a>
        </h1>

        <p>The almost missing Geocoder PHP library!</p>

        <p class="view"><a href="https://github.com/geocoder-php/Geocoder">View the Project on GitHub <small>geocoder-php/Geocoder</small></a></p>

        <ul>
          <li><a href="https://github.com/geocoder-php/Geocoder/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/geocoder-php/Geocoder/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/geocoder-php/Geocoder">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="geocoder" class="anchor" href="#geocoder"><span class="octicon octicon-link"></span></a>Geocoder</h1>

<p><a href="http://travis-ci.org/geocoder-php/Geocoder"><img src="https://secure.travis-ci.org/geocoder-php/Geocoder.png" alt="Build Status"></a></p>

<p><strong>Geocoder</strong> is a library which helps you build geo-aware applications. It provides an abstraction layer for geocoding manipulations.
The library is split in two parts: <code>HttpAdapter</code> and <code>Provider</code> and is really extensible.</p>

<h3>
<a name="httpadapters" class="anchor" href="#httpadapters"><span class="octicon octicon-link"></span></a>HttpAdapters</h3>

<p><em>HttpAdapters</em> are responsible to get data from remote APIs.</p>

<p>Currently, there are the following adapters:</p>

<ul>
<li>
<code>BuzzHttpAdapter</code> to use <a href="https://github.com/kriswallsmith/Buzz">Buzz</a>, a lightweight PHP 5.3 library for issuing HTTP requests;</li>
<li>
<code>CurlHttpAdapter</code> to use <a href="http://php.net/manual/book.curl.php">cURL</a>;</li>
<li>
<code>GuzzleHttpAdapter</code> to use <a href="https://github.com/guzzle/guzzle">Guzzle</a>, PHP 5.3+ HTTP client and framework for building RESTful web service clients;</li>
<li>
<code>SocketHttpAdapter</code> to use a <a href="http://www.php.net/manual/function.fsockopen.php">socket</a>;</li>
<li>
<code>ZendHttpAdapter</code> to use <a href="http://framework.zend.com/manual/2.0/en/modules/zend.http.client.html">Zend Http Client</a>.</li>
</ul><h3>
<a name="providers" class="anchor" href="#providers"><span class="octicon octicon-link"></span></a>Providers</h3>

<p><em>Providers</em> contain the logic to extract useful information.</p>

<p>Currently, there are many providers for the following APIs:</p>

<ul>
<li>
<a href="http://freegeoip.net/static/index.html">FreeGeoIp</a> as IP-Based geocoding provider;</li>
<li>
<a href="http://www.hostip.info/">HostIp</a> as IP-Based geocoding provider;</li>
<li>
<a href="http://www.ipinfodb.com/">IpInfoDB</a> as IP-Based geocoding provider (city precision);</li>
<li>
<a href="http://code.google.com/apis/maps/documentation/geocoding/">Google Maps</a> as Address-Based geocoding and reverse geocoding provider;</li>
<li>
<a href="https://developers.google.com/maps/documentation/business/webservices">Google Maps for Business</a> as Address-Based geocoding and reverse geocoding provider;</li>
<li>
<a href="http://msdn.microsoft.com/en-us/library/ff701715.aspx">Bing Maps</a> as Address-Based geocoding and reverse geocoding provider;</li>
<li>
<a href="http://nominatim.openstreetmap.org/">OpenStreetMaps</a> as Address-Based geocoding and reverse geocoding provider;</li>
<li>
<a href="http://developers.cloudmade.com/projects/show/geocoding-http-api">CloudMade</a> as Address-Based geocoding and reverse geocoding provider;</li>
<li>
<a href="http://php.net/manual/book.geoip.php">Geoip</a>, the PHP extension, as IP-Based geocoding provider;</li>
<li>ChainProvider is a special provider that takes a list of providers and iterates
over this list to get information;</li>
<li>
<a href="http://open.mapquestapi.com/">MapQuest</a> as Address-Based geocoding and reverse geocoding provider;</li>
<li>
<a href="http://geo.oiorest.dk/">OIORest</a> as very accurate Address-Based geocoding and reverse geocoding provider (exclusively in Denmark);</li>
<li>
<a href="http://geocoder.ca/">GeoCoder.ca</a> as Address-Based geocoding and reverse geocoding provider (exclusively in USA &amp; Canada);</li>
<li>
<a href="http://geocoder.us/">GeoCoder.us</a> as Address-Based geocoding provider (exclusively in USA);</li>
<li>
<a href="http://www.ign.fr/">IGN OpenLS</a> as Address-Based geocoding provider (exclusively in France);</li>
<li>
<a href="http://www.datasciencetoolkit.org/">DataScienceToolkit</a> as IP-Based geocoding provider or an Address-Based provider (exclusively in USA &amp; Canada);</li>
<li>
<a href="http://api.yandex.com.tr/maps/doc/geocoder/desc/concepts/About.xml">Yandex</a> as Address-Based geocoding and reverse geocoding provider;</li>
<li>
<a href="http://www.geoplugin.com/webservices">GeoPlugin</a> as IP-Based geocoding provider;</li>
<li>
<a href="http://www.geoips.com/developer/geoips-api">GeoIPs</a> as IP-Based geocoding provider;</li>
<li>
<a href="http://dev.maxmind.com/geoip/legacy/web-services">MaxMind web service</a> as IP-Based geocoding provider (City/ISP/Org and Omni services);</li>
<li>
<a href="http://dev.maxmind.com/geoip/legacy/downloadable">MaxMind binary file</a> as IP-Based geocoding provider;</li>
<li>
<a href="http://www.geonames.org/">Geonames</a> as Place-Based geocoding and reverse geocoding provider;</li>
<li>
<a href="http://ipgeobase.ru/">IpGeoBase</a> as IP-Based geocoding provider (very accurate in Russia);</li>
<li>
<a href="http://developer.baidu.com/map/geocoding-api.htm">Baidu</a> as Address-Based geocoding and reverse geocoding provider (exclusively in China);</li>
<li>
<a href="http://developer.tomtom.com/docs/read/Geocoding">TomTom</a> as Address-Based geocoding and reverse geocoding provider;</li>
<li>
<a href="http://resources.arcgis.com/en/help/arcgis-online-geocoding-rest-api/">ArcGIS Online</a> as Address-Based geocoding and reverse geocoding provider.</li>
</ul><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>The recommended way to install Geocoder is through composer.</p>

<p>Just create a <code>composer.json</code> file for your project:</p>

<div class="highlight"><pre><span class="p">{</span>
    <span class="nt">"require"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"willdurand/geocoder"</span><span class="p">:</span> <span class="s2">"*"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>And run these two commands to install it:</p>

<div class="highlight"><pre><span class="nv">$ </span>wget http://getcomposer.org/composer.phar
<span class="nv">$ </span>php composer.phar install
</pre></div>

<p>Now you can add the autoloader, and you will have access to the library:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>
</pre></div>

<p>If you don't use either <strong>Composer</strong> or a <em>ClassLoader</em> in your application, just require the provided autoloader:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">require_once</span> <span class="s1">'src/autoload.php'</span><span class="p">;</span>
</pre></div>

<p>You're done.</p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>First, you need an <code>adapter</code> to query an API:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$adapter</span>  <span class="o">=</span> <span class="k">new</span> <span class="nx">\Geocoder\HttpAdapter\BuzzHttpAdapter</span><span class="p">();</span>
</pre></div>

<p>The <code>BuzzHttpAdapter</code> is tweakable, actually you can pass a <code>Browser</code> object to this adapter:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$buzz</span>    <span class="o">=</span> <span class="k">new</span> <span class="nx">\Buzz\Browser</span><span class="p">(</span><span class="k">new</span> <span class="nx">\Buzz\Client\Curl</span><span class="p">());</span>
<span class="nv">$adapter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Geocoder\HttpAdapter\BuzzHttpAdapter</span><span class="p">(</span><span class="nv">$buzz</span><span class="p">);</span>
</pre></div>

<p>Now, you have to choose a <code>provider</code> which is closed to what you want to get.</p>

<h3>
<a name="freegeoipprovider" class="anchor" href="#freegeoipprovider"><span class="octicon octicon-link"></span></a>FreeGeoIpProvider</h3>

<p>The <code>FreeGeoIpProvider</code> named <code>free_geo_ip</code> is able to geocode <strong>IPv4 and IPv6 addresses</strong> only.</p>

<h3>
<a name="hostipprovider" class="anchor" href="#hostipprovider"><span class="octicon octicon-link"></span></a>HostIpProvider</h3>

<p>The <code>HostIpProvider</code> named <code>host_ip</code> is able to geocode <strong>IPv4 addresses</strong> only.</p>

<h3>
<a name="ipinfodbprovider" class="anchor" href="#ipinfodbprovider"><span class="octicon octicon-link"></span></a>IpInfoDbProvider</h3>

<p>The <code>IpInfoDbProvider</code> named <code>ip_info_db</code> is able to geocode <strong>IPv4 addresses</strong> only.
A valid api key is required.</p>

<h3>
<a name="googlemapsprovider" class="anchor" href="#googlemapsprovider"><span class="octicon octicon-link"></span></a>GoogleMapsProvider</h3>

<p>The <code>GoogleMapsProvider</code> named <code>google_maps</code> is able to geocode and reverse geocode <strong>street addresses</strong>.</p>

<h3>
<a name="googlemapsbusinessprovider" class="anchor" href="#googlemapsbusinessprovider"><span class="octicon octicon-link"></span></a>GoogleMapsBusinessProvider</h3>

<p>The <code>GoogleMapsBusinessProvider</code> named <code>google_maps_business</code> is able to geocode and reverse geocode <strong>street addresses</strong>.
A valid <code>Client ID</code> is required. The private key is optional.</p>

<h3>
<a name="bingmapsprovider" class="anchor" href="#bingmapsprovider"><span class="octicon octicon-link"></span></a>BingMapsProvider</h3>

<p>The <code>BingMapsProvider</code> named <code>bing_maps</code> is able to geocode and reverse geocode <strong>street addresses</strong>.
A valid api key is required.</p>

<h3>
<a name="openstreetmapsprovider" class="anchor" href="#openstreetmapsprovider"><span class="octicon octicon-link"></span></a>OpenStreetMapsProvider</h3>

<p>The <code>OpenStreetMapsProvider</code> named <code>openstreetmaps</code> is able to geocode and reverse geocode <strong>street addresses</strong>.</p>

<h3>
<a name="cloudmadeprovider" class="anchor" href="#cloudmadeprovider"><span class="octicon octicon-link"></span></a>CloudMadeProvider</h3>

<p>The <code>CloudMadeProvider</code> named <code>cloudmade</code> is able to geocode and reverse geocode <strong>street addresses</strong>.
A valid api key is required.</p>

<h3>
<a name="geoipprovider" class="anchor" href="#geoipprovider"><span class="octicon octicon-link"></span></a>GeoipProvider</h3>

<p>The <code>GeoipProvider</code> named <code>geoip</code> is able to geocode <strong>IPv4 and IPv6 addresses</strong> only. No need to use an <code>HttpAdapter</code> as it uses a local database.
See the <a href="http://www.maxmind.com/app/php">MaxMind page</a> for more information.</p>

<h3>
<a name="chainprovider" class="anchor" href="#chainprovider"><span class="octicon octicon-link"></span></a>ChainProvider</h3>

<p>The <code>ChainProvider</code> named <code>chain</code> is a special provider that takes a list of providers and iterates over this list to get information.</p>

<h3>
<a name="mapquestprovider" class="anchor" href="#mapquestprovider"><span class="octicon octicon-link"></span></a>MapQuestProvider</h3>

<p>The <code>MapQuestProvider</code> named <code>map_quest</code> is able to geocode and reverse geocode <strong>street addresses</strong>.</p>

<h3>
<a name="oiorestprovider" class="anchor" href="#oiorestprovider"><span class="octicon octicon-link"></span></a>OIORestProvider</h3>

<p>The <code>OIORestProvider</code> named <code>oio_rest</code> is able to geocode and reverse geocode <strong>street addresses</strong>, exclusively in Denmark.</p>

<h3>
<a name="geocodercaprovider" class="anchor" href="#geocodercaprovider"><span class="octicon octicon-link"></span></a>GeocoderCaProvider</h3>

<p>The <code>GeocoderCaProvider</code> named <code>geocoder_ca</code> is able to geocode and reverse geocode <strong>street addresses</strong>, exclusively in USA &amp; Canada.</p>

<h3>
<a name="geocoderusprovider" class="anchor" href="#geocoderusprovider"><span class="octicon octicon-link"></span></a>GeocoderUsProvider</h3>

<p>The <code>GeocoderUsProvider</code> named <code>geocoder_us</code> is able to geocode <strong>street addresses</strong> only, exclusively in USA.</p>

<h3>
<a name="ignopenlsprovider" class="anchor" href="#ignopenlsprovider"><span class="octicon octicon-link"></span></a>IGNOpenLSProvider</h3>

<p>The <code>IGNOpenLSProvider</code> named <code>ign_openls</code> is able to geocode <strong>street addresses</strong> only, exclusively in France.
A valid OpenLS api key is required.</p>

<h3>
<a name="datasciencetoolkitprovider" class="anchor" href="#datasciencetoolkitprovider"><span class="octicon octicon-link"></span></a>DataScienceToolkitProvider</h3>

<p>The <code>DataScienceToolkitProvider</code> named <code>data_science_toolkit</code> is able to geocode <strong>IPv4 addresses</strong> and <strong>street adresses</strong>, exclusively in USA &amp; Canada.</p>

<h3>
<a name="yandexprovider" class="anchor" href="#yandexprovider"><span class="octicon octicon-link"></span></a>YandexProvider</h3>

<p>The <code>YandexProvider</code> named <code>yandex</code> is able to geocode and reverse geocode <strong>street addresses</strong>.
The default langage-locale is <code>ru-RU</code>, you can choose between <code>uk-UA</code>, <code>be-BY</code>,
<code>en-US</code>, <code>en-BR</code> and <code>tr-TR</code>.
This provider can also reverse information based on coordinates (latitude,
longitude). It's possible to precise the toponym to get more accurate result for reverse geocoding:
<code>house</code>, <code>street</code>, <code>metro</code>, <code>district</code> and <code>locality</code>.</p>

<h3>
<a name="geopluginprovider" class="anchor" href="#geopluginprovider"><span class="octicon octicon-link"></span></a>GeoPluginProvider</h3>

<p>The <code>GeoPluginProvider</code> named <code>geo_plugin</code> is able to geocode <strong>IPv4 addresses and IPv6 addresses</strong> only.</p>

<h3>
<a name="geoipsprovider" class="anchor" href="#geoipsprovider"><span class="octicon octicon-link"></span></a>GeoIPsProvider</h3>

<p>The <code>GeoIPsProvider</code> named <code>geo_ips</code> is able to geocode <strong>IPv4 addresses</strong> only.
A valid api key is required.</p>

<h3>
<a name="maxmindprovider" class="anchor" href="#maxmindprovider"><span class="octicon octicon-link"></span></a>MaxMindProvider</h3>

<p>The <code>MaxMindProvider</code> named <code>maxmind</code> is able to geocode <strong>IPv4 and IPv6 addresses</strong> only.
A valid <code>City/ISP/Org</code> or <code>Omni</code> service's api key is required.
This provider provides two constants <code>CITY_EXTENDED_SERVICE</code> by default and <code>OMNI_SERVICE</code>.</p>

<h3>
<a name="geonamesprovider" class="anchor" href="#geonamesprovider"><span class="octicon octicon-link"></span></a>GeonamesProvider</h3>

<p>The <code>GeonamesProvider</code> named <code>geonames</code> is able to geocode and reverse geocode <strong>places</strong>.
A valid username is required.</p>

<h3>
<a name="ipgeobaseprovider" class="anchor" href="#ipgeobaseprovider"><span class="octicon octicon-link"></span></a>IpGeoBaseProvider</h3>

<p>The <code>IpGeoBaseProvider</code> named <code>ip_geo_base</code> is able to geocode <strong>IPv4 addresses</strong> only, very accurate in Russia.</p>

<h3>
<a name="baiduprovider" class="anchor" href="#baiduprovider"><span class="octicon octicon-link"></span></a>BaiduProvider</h3>

<p>The <code>BaiduProvider</code> named <code>baidu</code> is able to geocode and reverse geocode <strong>street addresses</strong>, exclusively in China.
A valid api key is required.</p>

<h3>
<a name="tomtomprovider" class="anchor" href="#tomtomprovider"><span class="octicon octicon-link"></span></a>TomTomProvider</h3>

<p>The <code>TomTomProvider</code> named <code>tomtom</code> is able to geocode and reverse geocode <strong>street addresses</strong>.
The default langage-locale is <code>en</code>, you can choose between <code>de</code>, <code>es</code>, <code>fr</code>, <code>it</code>, <code>nl</code>, <code>pl</code>, <code>pt</code> and <code>sv</code>.
A valid api key is required.</p>

<h3>
<a name="arcgisonlineprovider" class="anchor" href="#arcgisonlineprovider"><span class="octicon octicon-link"></span></a>ArcGISOnlineProvider</h3>

<p>The <code>ArcGISOnlineProvider</code> named <code>arcgis_online</code> is able to geocode and reverse geocode <strong>street addresses</strong>.
It's possible to specify a sourceCountry to restrict result to this specific country thus reducing
request time (note that this doesn't work on reverse geocoding). This provider also supports SSL.</p>

<h3>
<a name="using-the-providers" class="anchor" href="#using-the-providers"><span class="octicon octicon-link"></span></a>Using The Providers</h3>

<p>You can use one of them or write your own provider. You can also register all providers and decide later.
That's we'll do:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$geocoder</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Geocoder\Geocoder</span><span class="p">();</span>
<span class="nv">$geocoder</span><span class="o">-&gt;</span><span class="na">registerProviders</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="k">new</span> <span class="nx">\Geocoder\Provider\GoogleMapsProvider</span><span class="p">(</span>
        <span class="nv">$adapter</span><span class="p">,</span> <span class="nv">$locale</span><span class="p">,</span> <span class="nv">$region</span><span class="p">,</span> <span class="nv">$useSsl</span>
    <span class="p">),</span>
    <span class="k">new</span> <span class="nx">\Geocoder\Provider\GoogleMapsBusinessProvider</span><span class="p">(</span>
        <span class="nv">$adapter</span><span class="p">,</span> <span class="s1">'&lt;CLIENT_ID&gt;'</span><span class="p">,</span> <span class="s1">'&lt;PRIVATE_KEY&gt;'</span><span class="p">,</span> <span class="nv">$locale</span><span class="p">,</span> <span class="nv">$region</span><span class="p">,</span> <span class="nv">$useSsl</span>
    <span class="p">),</span>
    <span class="k">new</span> <span class="nx">\Geocoder\Provider\YandexProvider</span><span class="p">(</span>
        <span class="nv">$adapter</span><span class="p">,</span> <span class="nv">$locale</span><span class="p">,</span> <span class="nv">$toponym</span>
    <span class="p">),</span>
    <span class="k">new</span> <span class="nx">\Geocoder\Provider\MaxMindProvider</span><span class="p">(</span>
        <span class="nv">$adapter</span><span class="p">,</span> <span class="s1">'&lt;MAXMIND_API_KEY&gt;'</span><span class="p">,</span> <span class="nv">$service</span><span class="p">,</span> <span class="nv">$useSsl</span>
    <span class="p">),</span>
    <span class="k">new</span> <span class="nx">\Geocoder\Provider\ArcGISOnlineProvider</span><span class="p">(</span>
        <span class="nv">$adapter</span><span class="p">,</span> <span class="nv">$sourceCountry</span><span class="p">,</span> <span class="nv">$useSsl</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>

<p>Parameters:</p>

<ul>
<li>
<code>$locale</code> is available for <code>YandexProvider</code>, <code>BingMapsProvider</code> and <code>TomTomProvider</code>.</li>
<li>
<code>$region</code> is available for <code>GoogleMapsProvider</code> and <code>GoogleMapsBusinessProvider</code>.</li>
<li>
<code>$toponym</code> is available for <code>YandexProvider</code>.</li>
<li>
<code>$service</code> is available for <code>MaxMindProvider</code>.</li>
<li>
<code>$useSsl</code> is available for <code>GoogleMapsProvider</code>, <code>GoogleMapsBusinessProvider</code>, <code>MaxMindProvider</code> and <code>ArcGISOnlineProvider</code>.</li>
<li>
<code>$sourceCountry</code> is available for <code>ArcGISOnlineProvider</code>.</li>
</ul><h3>
<a name="using-the-chainprovider" class="anchor" href="#using-the-chainprovider"><span class="octicon octicon-link"></span></a>Using The ChainProvider</h3>

<p>As said it's a special provider that takes a list of providers and iterates over this list to get information. Note
that it <strong>stops</strong> its iteration when a provider returns a result. The result is returned by <code>GoogleMapsProvider</code>
because <code>FreeGeoIpProvider</code> and <code>HostIpProvider</code> cannot geocode street addresses. <code>BingMapsProvider</code> is ignored.</p>

<div class="highlight"><pre><span class="nv">$geocoder</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Geocoder\Geocoder</span><span class="p">();</span>
<span class="nv">$adapter</span>  <span class="o">=</span> <span class="k">new</span> <span class="nx">\Geocoder\HttpAdapter\CurlHttpAdapter</span><span class="p">();</span>
<span class="nv">$chain</span>    <span class="o">=</span> <span class="k">new</span> <span class="nx">\Geocoder\Provider\ChainProvider</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="k">new</span> <span class="nx">\Geocoder\Provider\FreeGeoIpProvider</span><span class="p">(</span><span class="nv">$adapter</span><span class="p">),</span>
    <span class="k">new</span> <span class="nx">\Geocoder\Provider\HostIpProvider</span><span class="p">(</span><span class="nv">$adapter</span><span class="p">),</span>
    <span class="k">new</span> <span class="nx">\Geocoder\Provider\GoogleMapsProvider</span><span class="p">(</span><span class="nv">$adapter</span><span class="p">,</span> <span class="s1">'fr_FR'</span><span class="p">,</span> <span class="s1">'France'</span><span class="p">,</span> <span class="k">true</span><span class="p">),</span>
    <span class="k">new</span> <span class="nx">\Geocoder\Provider\BingMapsProvider</span><span class="p">(</span><span class="nv">$adapter</span><span class="p">,</span> <span class="s1">'&lt;API_KEY&gt;'</span><span class="p">),</span>
    <span class="c1">// ...</span>
<span class="p">));</span>
<span class="nv">$geocoder</span><span class="o">-&gt;</span><span class="na">registerProvider</span><span class="p">(</span><span class="nv">$chain</span><span class="p">);</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$geocode</span> <span class="o">=</span> <span class="nv">$geocoder</span><span class="o">-&gt;</span><span class="na">geocode</span><span class="p">(</span><span class="s1">'10 rue Gambetta, Paris, France'</span><span class="p">);</span>
    <span class="nb">var_export</span><span class="p">(</span><span class="nv">$geocode</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">echo</span> <span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>

<p>Everything is ok, enjoy!</p>

<h2>
<a name="api" class="anchor" href="#api"><span class="octicon octicon-link"></span></a>API</h2>

<p>The main method is called <code>geocode()</code> which receives a value to geocode. It can be an IP address or a street address (partial or not).</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$geocoder</span><span class="o">-&gt;</span><span class="na">geocode</span><span class="p">(</span><span class="s1">'88.188.221.14'</span><span class="p">);</span>
<span class="c1">// Result is:</span>
<span class="c1">// "latitude"       =&gt; string(9) "47.901428"</span>
<span class="c1">// "longitude"      =&gt; string(8) "1.904960"</span>
<span class="c1">// "bounds"         =&gt; array(4) {</span>
<span class="c1">//     "south" =&gt; string(9) "47.813320"</span>
<span class="c1">//     "west"  =&gt; string(8) "1.809770"</span>
<span class="c1">//     "north" =&gt; string(9) "47.960220"</span>
<span class="c1">//     "east"  =&gt; string(8) "1.993860"</span>
<span class="c1">// }</span>
<span class="c1">// "streetNumber"   =&gt; string(0) ""</span>
<span class="c1">// "streetName"     =&gt; string(0) ""</span>
<span class="c1">// "cityDistrict"   =&gt; string(0) ""</span>
<span class="c1">// "city"           =&gt; string(7) "Orleans"</span>
<span class="c1">// "zipcode"        =&gt; string(0) ""</span>
<span class="c1">// "county"         =&gt; string(6) "Loiret"</span>
<span class="c1">// "countyCode"     =&gt; null</span>
<span class="c1">// "region"         =&gt; string(6) "Centre"</span>
<span class="c1">// "regionCode"     =&gt; null</span>
<span class="c1">// "country"        =&gt; string(6) "France"</span>
<span class="c1">// "countryCode"    =&gt; string(2) "FR"</span>
<span class="c1">// "timezone"       =&gt; string(6) "Europe/Paris"</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$geocoder</span><span class="o">-&gt;</span><span class="na">geocode</span><span class="p">(</span><span class="s1">'10 rue Gambetta, Paris, France'</span><span class="p">);</span>
<span class="c1">// Result is:</span>
<span class="c1">// "latitude"       =&gt; string(9) "48.863217"</span>
<span class="c1">// "longitude"      =&gt; string(8) "2.388821"</span>
<span class="c1">// "bounds"         =&gt; array(4) {</span>
<span class="c1">//     "south" =&gt; string(9) "48.863217"</span>
<span class="c1">//     "west"  =&gt; string(8) "2.388821"</span>
<span class="c1">//     "north" =&gt; string(9) "48.863217"</span>
<span class="c1">//     "east"  =&gt; string(8) "2.388821"</span>
<span class="c1">// }</span>
<span class="c1">// "streetNumber"   =&gt; string(2) "10"</span>
<span class="c1">// "streetName"     =&gt; string(15) "Avenue Gambetta"</span>
<span class="c1">// "cityDistrict"   =&gt; string(18) "20E Arrondissement"</span>
<span class="c1">// "city"           =&gt; string(5) "Paris"</span>
<span class="c1">// "county"         =&gt; string(5) "Paris"</span>
<span class="c1">// "countyCode"     =&gt; null</span>
<span class="c1">// "zipcode"        =&gt; string(5) "75020"</span>
<span class="c1">// "region"         =&gt; string(14) "Ile-de-France"</span>
<span class="c1">// "regionCode"     =&gt; null</span>
<span class="c1">// "country"        =&gt; string(6) "France"</span>
<span class="c1">// "countryCode"    =&gt; string(2) "FR"</span>
<span class="c1">// "timezone"       =&gt; string(6) "Europe/Paris"</span>
</pre></div>

<p>The <code>geocode()</code> method returns a <code>Geocoded</code> result object with the following API, this object also implements the <code>ArrayAccess</code> interface:</p>

<ul>
<li>
<code>getCoordinates()</code> will return an array with <code>latitude</code> and <code>longitude</code> values;</li>
<li>
<code>getLatitude()</code> will return the <code>latitude</code> value;</li>
<li>
<code>getLongitude()</code> will return the <code>longitude</code> value;</li>
<li>
<code>getBounds()</code> will return an array with <code>south</code>, <code>west</code>, <code>north</code> and <code>east</code> values;</li>
<li>
<code>getStreetNumber()</code> will return the <code>street number/house number</code> value;</li>
<li>
<code>getStreetName()</code> will return the <code>street name</code> value;</li>
<li>
<code>getCity()</code> will return the <code>city</code>;</li>
<li>
<code>getZipcode()</code> will return the <code>zipcode</code>;</li>
<li>
<code>getCityDistrict()</code> will return the <code>city district</code>, or <code>sublocality</code>;</li>
<li>
<code>getCounty()</code> will return the <code>county</code>;</li>
<li>
<code>getCountyCode()</code> will return the <code>county</code> code (county short name);</li>
<li>
<code>getRegion()</code> will return the <code>region</code>;</li>
<li>
<code>getRegionCode()</code> will return the <code>region</code> code (region short name);</li>
<li>
<code>getCountry()</code> will return the <code>country</code>;</li>
<li>
<code>getCountryCode()</code> will return the ISO <code>country</code> code;</li>
<li>
<code>getTimezone()</code> will return the <code>timezone</code>.</li>
</ul><p>The Geocoder's API is fluent, you can write:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$geocoder</span>
    <span class="o">-&gt;</span><span class="na">registerProvider</span><span class="p">(</span><span class="k">new</span> <span class="nx">\My\Provider\Custom</span><span class="p">(</span><span class="nv">$adapter</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">using</span><span class="p">(</span><span class="s1">'custom'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">limit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="na">geocode</span><span class="p">(</span><span class="s1">'68.145.37.34'</span><span class="p">)</span>
    <span class="p">;</span>
</pre></div>

<p>The <code>using()</code> method allows you to choose the <code>provider</code> to use by its name.
When you deal with multiple providers, you may want to choose one of them.
The default behavior is to use the first one but it can be annoying.</p>

<p>The <code>limit()</code> method allows you to configure the maximum number of results
being returned. Depending on the provider you may not get as many results as
expected, it is a maximum limit, not the expected number of results.</p>

<h2>
<a name="reverse-geocoding" class="anchor" href="#reverse-geocoding"><span class="octicon octicon-link"></span></a>Reverse Geocoding</h2>

<p>This library provides a <code>reverse()</code> method to retrieve information from coordinates:</p>

<div class="highlight"><pre><span class="nv">$result</span> <span class="o">=</span> <span class="nv">$geocoder</span><span class="o">-&gt;</span><span class="na">reverse</span><span class="p">(</span><span class="nv">$latitude</span><span class="p">,</span> <span class="nv">$longitude</span><span class="p">);</span>
</pre></div>

<h2>
<a name="dumpers" class="anchor" href="#dumpers"><span class="octicon octicon-link"></span></a>Dumpers</h2>

<p><strong>Geocoder</strong> provides dumpers that aim to transform a <code>ResultInterface</code> object in standard formats.</p>

<h3>
<a name="gps-exchange-format-gpx" class="anchor" href="#gps-exchange-format-gpx"><span class="octicon octicon-link"></span></a>GPS eXchange Format (GPX)</h3>

<p>The <strong>GPS eXchange</strong> format is designed to share geolocated data like point of interests, tracks, ways, but also
coordinates. <strong>Geocoder</strong> provides a dumper to convert a <code>ResultInterface</code> object in an GPX compliant format.</p>

<p>Assuming we got a <code>$result</code> object as seen previously:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="nv">$dumper</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Geocoder\Dumper\GpxDumper</span><span class="p">();</span>
<span class="nv">$strGpx</span> <span class="o">=</span> <span class="nv">$dumper</span><span class="o">-&gt;</span><span class="na">dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>

<span class="k">echo</span> <span class="nv">$strGpx</span><span class="p">;</span>
</pre></div>

<p>It will display:</p>

<div class="highlight"><pre><span class="nt">&lt;gpx</span>
    <span class="na">version=</span><span class="s">"1.0"</span>
    <span class="na">creator=</span><span class="s">"Geocoder"</span> <span class="na">version=</span><span class="s">"1.0.1-dev"</span>
    <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="na">xmlns=</span><span class="s">"http://www.topografix.com/GPX/1/0"</span>
    <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.topografix.com/GPX/1/0 http://www.topografix.com/GPX/1/0/gpx.xsd"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;bounds</span> <span class="na">minlat=</span><span class="s">"2.388911"</span> <span class="na">minlon=</span><span class="s">"48.863151"</span> <span class="na">maxlat=</span><span class="s">"2.388911"</span> <span class="na">maxlon=</span><span class="s">"48.863151"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;wpt</span> <span class="na">lat=</span><span class="s">"48.8631507"</span> <span class="na">lon=</span><span class="s">"2.3889114"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;name&gt;</span><span class="cp">&lt;![CDATA[Paris]]&gt;</span><span class="nt">&lt;/name&gt;</span>
        <span class="nt">&lt;type&gt;</span><span class="cp">&lt;![CDATA[Address]]&gt;</span><span class="nt">&lt;/type&gt;</span>
    <span class="nt">&lt;/wpt&gt;</span>
<span class="nt">&lt;/gpx&gt;</span>
</pre></div>

<h3>
<a name="geojson" class="anchor" href="#geojson"><span class="octicon octicon-link"></span></a>GeoJSON</h3>

<p><a href="http://geojson.org/">GeoJSON</a> is a format for encoding a variety of geographic data structures.</p>

<h3>
<a name="keyhole-markup-language-kml" class="anchor" href="#keyhole-markup-language-kml"><span class="octicon octicon-link"></span></a>Keyhole Markup Language (KML)</h3>

<p><a href="http://en.wikipedia.org/wiki/Keyhole_Markup_Language">Keyhole Markup Language</a> is an XML notation
for expressing geographic annotation and visualization within Internet-based, two-dimensional maps
and three-dimensional Earth browsers.</p>

<h3>
<a name="well-known-binary-wkb" class="anchor" href="#well-known-binary-wkb"><span class="octicon octicon-link"></span></a>Well-Known Binary (WKB)</h3>

<p>The Well-Known Binary (WKB) representation for geometric values is defined by the OpenGIS specification.</p>

<h3>
<a name="well-known-text-wkt" class="anchor" href="#well-known-text-wkt"><span class="octicon octicon-link"></span></a>Well-Known Text (WKT)</h3>

<p>Well-known text (WKT) is a text markup language for representing vector geometry objects on a map,
spatial reference systems of spatial objects and transformations between spatial reference systems.</p>

<h2>
<a name="formatter" class="anchor" href="#formatter"><span class="octicon octicon-link"></span></a>Formatter</h2>

<p>A common use case is to print geocoded data. Thanks to the <code>Formatter</code> class,
it's really easy to format a <code>ResultInterface</code> object as a string:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>

<span class="c1">// $result is an instance of ResultInterface</span>
<span class="nv">$formatter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Geocoder\Formatter\Formatter</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>

<span class="nv">$formatter</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'%S %n, %z %L'</span><span class="p">);</span>
<span class="c1">// 'Badenerstrasse 120, 8001 Zuerich'</span>

<span class="nv">$formatter</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">'&lt;p&gt;%S %n, %z %L&lt;/p&gt;'</span><span class="p">);</span>
<span class="c1">// '&lt;p&gt;Badenerstrasse 120, 8001 Zuerich&lt;/p&gt;'</span>
</pre></div>

<p>Here is the mapping:</p>

<ul>
<li><p>Street Number: <code>%n</code></p></li>
<li><p>Street Name: <code>%S</code></p></li>
<li><p>City: <code>%L</code></p></li>
<li><p>City District: <code>%D</code></p></li>
<li><p>Zipcode: <code>%z</code></p></li>
<li><p>County: <code>%P</code></p></li>
<li><p>County Code: <code>%p</code></p></li>
<li><p>Region: <code>%R</code></p></li>
<li><p>Region Code: <code>%r</code></p></li>
<li><p>Country: <code>%C</code></p></li>
<li><p>Country Code: <code>%c</code></p></li>
<li><p>Timezone: <code>%T</code></p></li>
</ul><h2>
<a name="extending-things" class="anchor" href="#extending-things"><span class="octicon octicon-link"></span></a>Extending Things</h2>

<p>You can provide your own <code>adapter</code>, you just need to create a new class which implements <code>HttpAdapterInterface</code>.</p>

<p>You can also write your own <code>provider</code> by implementing the <code>ProviderInterface</code>.</p>

<p>You can provide your own <code>result</code> by extending <code>DefaultResultFactory</code> or <code>MultipleResultFactory</code> and implementing
<code>ResultInterface</code> if your provider returns one or multiple results and more informations than the default one.
Please note that the method <code>createFromArray</code> is marked <code>final</code> in these factories.</p>

<p>If you need your own <code>ResultFactory</code>, just implement <code>ResultFactoryInterface</code>.</p>

<p>Note, <code>AbstractProvider</code> and <code>AbstractResult</code> classes can help you by providing useful features.</p>

<p>You can provide your own <code>dumper</code> by implementing the <code>DumperInterface</code>.</p>

<p>Write your own <code>formatter</code> by implementing the <code>FormatterInterface</code>.</p>

<h2>
<a name="contributing" class="anchor" href="#contributing"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>See CONTRIBUTING file.</p>

<h2>
<a name="unit-tests" class="anchor" href="#unit-tests"><span class="octicon octicon-link"></span></a>Unit Tests</h2>

<p>To run unit tests, you'll need <code>cURL</code> and a set of dependencies you can install using Composer:</p>

<pre><code>php composer.phar install --dev
</code></pre>

<p>Once installed, just launch the following command:</p>

<pre><code>phpunit
</code></pre>

<p>You'll obtain some <em>skipped</em> unit tests due to the need of API keys.</p>

<p>Rename the <code>phpunit.xml.dist</code> file to <code>phpunit.xml</code>, then uncomment the following lines and add your own API keys:</p>

<div class="highlight"><pre><span class="nt">&lt;php&gt;</span>
    <span class="c">&lt;!-- &lt;server name="IPINFODB_API_KEY" value="YOUR_API_KEY" /&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;server name="BINGMAPS_API_KEY" value="YOUR_API_KEY" /&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;server name="CLOUDMADE_API_KEY" value="YOUR_API_KEY" /&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;server name="IGN_WEB_API_KEY" value="YOUR_API_KEY" /&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;server name="GEOIPS_API_KEY" value="YOUR_API_KEY" /&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;server name="MAXMIND_API_KEY" value="YOUR_API_KEY" /&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;server name="GEONAMES_USERNAME" value="YOUR_USERNAME" /&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;server name="BAIDU_API_KEY" value="YOUR_API_KEY" /&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;server name="TOMTOM_GEOCODING_KEY" value="YOUR_GEOCODING_KEY" /&gt; --&gt;</span>
    <span class="c">&lt;!-- &lt;server name="TOMTOM_MAP_KEY" value="YOUR_MAP_KEY" /&gt; --&gt;</span>
<span class="nt">&lt;/php&gt;</span>
</pre></div>

<p>You're done.</p>

<h2>
<a name="credits" class="anchor" href="#credits"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul>
<li>William Durand <a href="mailto:william.durand1@gmail.com">william.durand1@gmail.com</a>
</li>
<li><a href="https://github.com/geocoder-php/Geocoder/contributors">All contributors</a></li>
</ul><h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Geocoder is released under the MIT License. See the bundled LICENSE file for details.</p>
      </section>
      <footer>
        <p>
            This project is maintained by <a href="https://github.com/willdurand">William Durand</a> and
            <a href="https://github.com/geocoder-php/Geocoder/contributors">awesome people</a>.
        </p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="/js/scale.fix.js"></script>
    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-27331396-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>
  </body>
</html>
